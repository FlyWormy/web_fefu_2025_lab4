{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ FEFU{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'main/css/style.css' %}">
    <style>
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
        }

        .avatar-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
        }

        .role-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .role-student { background: #28a745; color: white; }
        .role-teacher { background: #007bff; color: white; }
        .role-admin { background: #dc3545; color: white; }

        .nav-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .welcome-message {
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-nav">
                <a href="{% url 'index' %}" class="nav-link">üè† –ì–ª–∞–≤–Ω–∞—è</a>
                <a href="{% url 'course_list' %}" class="nav-link">üìö –ö—É—Ä—Å—ã</a>
                <a href="{% url 'about' %}" class="nav-link">‚ÑπÔ∏è –û –Ω–∞—Å</a>
                <a href="{% url 'feedback' %}" class="nav-link">üìß –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</a>

                {% if user.is_authenticated %}
                    <a href="{% url 'student_list' %}" class="nav-link">üë®‚Äçüéì –°—Ç—É–¥–µ–Ω—Ç—ã</a>
                    <a href="{% url 'instructor_list' %}" class="nav-link">üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</a>

                    {% if user.student_profile.role == 'TEACHER' or user.student_profile.role == 'ADMIN' %}
                        <a href="{% url 'teacher_dashboard' %}" class="nav-link">üìä –î–∞—à–±–æ—Ä–¥ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</a>
                    {% elif user.student_profile.role == 'STUDENT' %}
                        <a href="{% url 'student_dashboard' %}" class="nav-link">üìä –ú–æ–∏ –∫—É—Ä—Å—ã</a>
                    {% endif %}

                    <div class="nav-user">
                        <span class="welcome-message">
                            {% if user.student_profile.avatar %}
                                <img src="{{ user.student_profile.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar-small">
                            {% endif %}
                            {{ user.first_name|default:user.username }}
                            <span class="role-badge role-{{ user.student_profile.role|lower }}">
                                {{ user.student_profile.get_role_display }}
                            </span>
                        </span>

                        <a href="{% url 'profile' %}" class="nav-link">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
                        {% if user.is_staff or user.student_profile.role == 'ADMIN' %}
                            <a href="/admin/" class="nav-link">‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞</a>
                        {% endif %}
                        <a href="{% url 'logout' %}" class="nav-link">üö™ –í—ã–π—Ç–∏</a>
                    </div>
                {% else %}
                    <a href="{% url 'login' %}" class="nav-link">üîê –í—Ö–æ–¥</a>
                    <a href="{% url 'register' %}" class="nav-link">üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container">
        {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% block content %}
        {% endblock %}
    </div>

    <footer style="margin-top: 50px; padding: 20px; background: #343a40; color: white; text-align: center;">
        <div class="container">
            <p>¬© 2024 –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ FEFU. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <p style="font-size: 0.9em; color: #adb5bd;">
                –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –ø–æ Django - –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            </p>
        </div>
    </footer>
</body>
</html>