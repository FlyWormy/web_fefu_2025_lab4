{% extends 'main/base.html' %}

{% block title %}–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - FEFU Labs{% endblock %}

{% block content %}
<div style="max-width: 1400px; margin: 0 auto;">
    <div style="background: #dc3545; color: white; padding: 25px; border-radius: 10px; margin-bottom: 30px;">
        <h1 style="margin: 0; color: white;">‚öôÔ∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
        <p style="font-size: 1.1em; margin-top: 10px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.get_full_name }}!</p>
        <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–æ–π</p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div style="background: white; padding: 25px; border-radius: 8px; border: 1px solid #dee2e6; text-align: center;">
            <div style="font-size: 3em; color: #007bff;">{{ total_users }}</div>
            <div style="font-weight: bold; font-size: 1.2em;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
            <a href="/admin/auth/user/" style="color: #6c757d; font-size: 0.9em;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</a>
        </div>

        <div style="background: white; padding: 25px; border-radius: 8px; border: 1px solid #dee2e6; text-align: center;">
            <div style="font-size: 3em; color: #28a745;">{{ total_courses }}</div>
            <div style="font-weight: bold; font-size: 1.2em;">–ö—É—Ä—Å–æ–≤</div>
            <a href="/admin/main/course/" style="color: #6c757d; font-size: 0.9em;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</a>
        </div>

        <div style="background: white; padding: 25px; border-radius: 8px; border: 1px solid #dee2e6; text-align: center;">
            <div style="font-size: 3em; color: #17a2b8;">{{ total_enrollments }}</div>
            <div style="font-weight: bold; font-size: 1.2em;">–ó–∞–ø–∏—Å–µ–π –Ω–∞ –∫—É—Ä—Å—ã</div>
            <a href="/admin/main/enrollment/" style="color: #6c757d; font-size: 0.9em;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</a>
        </div>

        <div style="background: white; padding: 25px; border-radius: 8px; border: 1px solid #dee2e6; text-align: center;">
            <div style="font-size: 3em; color: #6c757d;">{{ recent_users|length }}</div>
            <div style="font-weight: bold; font-size: 1.2em;">–ù–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
            <p style="color: #6c757d; font-size: 0.9em;">–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</p>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px; margin-bottom: 30px;">
        <div style="background: white; padding: 25px; border-radius: 8px; border: 1px solid #dee2e6;">
            <h2>üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
            {% if recent_users %}
            <div style="margin-top: 20px;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: #f8f9fa;">
                            <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #dee2e6;">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                            <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #dee2e6;">–ò–º—è</th>
                            <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #dee2e6;">Email</th>
                            <th style="padding: 12px 15px; text-align: left; border-bottom: 2px solid #dee2e6;">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user_item in recent_users %}
                        <tr style="border-bottom: 1px solid #dee2e6;">
                            <td style="padding: 12px 15px;">
                                {{ user_item.username }}
                            </td>
                            <td style="padding: 12px 15px;">
                                {{ user_item.first_name }} {{ user_item.last_name }}
                            </td>
                            <td style="padding: 12px 15px;">
                                {{ user_item.email }}
                            </td>
                            <td style="padding: 12px 15px;">
                                {{ user_item.date_joined|date:"d.m.Y H:i" }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p style="color: #6c757d; margin-top: 20px;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö</p>
            {% endif %}
        </div>

        <div style="background: white; padding: 25px; border-radius: 8px; border: 1px solid #dee2e6;">
            <h2>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <div style="margin-top: 20px;">
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 15px;">
                        <a href="/admin/" class="btn" style="display: block; text-align: center;">
                            ‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞ Django
                        </a>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <a href="{% url 'student_list' %}" class="btn" style="display: block; text-align: center;">
                            üë®‚Äçüéì –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏
                        </a>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <a href="{% url 'instructor_list' %}" class="btn" style="display: block; text-align: center;">
                            üë®‚Äçüè´ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏
                        </a>
                    </li>
                    <li style="margin-bottom: 15px;">
                        <a href="{% url 'profile' %}" class="btn" style="display: block; text-align: center;">
                            üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div style="margin-top: 40px; display: flex; gap: 15px;">
        <a href="{% url 'index' %}" class="btn btn-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        <a href="{% url 'profile' %}" class="btn">üë§ –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å</a>
    </div>
</div>
{% endblock %}