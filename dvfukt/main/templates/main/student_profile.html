{% extends 'main/base.html' %}
{% load static %}

{% block title %}
    {% if error %}–û—à–∏–±–∫–∞{% else %}{{ student.get_full_name }}{% endif %}
{% endblock %}

{% block content %}
{% if error %}
    <div style="background: #f8d7da; color: #721c24; padding: 20px; border-radius: 8px;">
        <h1>‚ùå –û—à–∏–±–∫–∞</h1>
        <p><strong>–°–æ–æ–±—â–µ–Ω–∏–µ:</strong> {{ error }}</p>
        <p style="margin-top: 15px;">
            <a href="{% url 'index' %}" class="btn btn-secondary">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
        </p>
    </div>
{% else %}
    <div style="max-width: 800px; margin: 0 auto;">
        <div class="student-card">
            <h1>üéì {{ student.get_full_name }}</h1>
            <p style="font-size: 1.1em; color: #6c757d;">
                –§–∞–∫—É–ª—å—Ç–µ—Ç: {{ student.get_faculty_display }}
                {% if student.date_of_birth %}
                    | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: {{ student.date_of_birth }}
                {% endif %}
            </p>
            <p>Email: {{ student.email }}</p>
            <p>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: {{ student.created_at|date:"d.m.Y" }}</p>
        </div>

        <div style="margin-top: 30px;">
            <h3>üìö –ó–∞–ø–∏—Å–∏ –Ω–∞ –∫—É—Ä—Å—ã</h3>
            {% if enrollments %}
                <div style="display: grid; gap: 15px; margin-top: 20px;">
                    {% for enrollment in enrollments %}
                    <div style="border: 1px solid #dee2e6; padding: 15px; border-radius: 8px;">
                        <h4>{{ enrollment.course.title }}</h4>
                        <p>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: {{ enrollment.course.teacher }}</p>
                        <p>–°—Ç–∞—Ç—É—Å: <span style="color: {% if enrollment.status == 'active' %}#28a745{% elif enrollment.status == 'completed' %}#007bff{% else %}#dc3545{% endif %};">
                            {{ enrollment.get_status_display }}
                        </span></p>
                        <p>–î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏: {{ enrollment.enrollment_date|date:"d.m.Y" }}</p>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p>–°—Ç—É–¥–µ–Ω—Ç –Ω–µ –∑–∞–ø–∏—Å–∞–Ω –Ω–∏ –Ω–∞ –æ–¥–∏–Ω –∫—É—Ä—Å</p>
            {% endif %}

            <div style="margin-top: 30px;">
                <a href="{% url 'enrollment' student.id %}" class="btn">
                    üìù –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫—É—Ä—Å
                </a>
                <a href="{% url 'index' %}" class="btn btn-secondary">
                    –ù–∞ –≥–ª–∞–≤–Ω—É—é
                </a>
            </div>
        </div>
    </div>
{% endif %}
{% endblock %}